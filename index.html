<!DOCTYPE html>
<html lang="en">
<head>
    <title>Fatal Engine User Guide</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="res/img/FatalEngineLogo.png" rel="icon">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link rel="stylesheet" href="res/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <svg style="display: none;">
        <!-- Camera -->
        <symbol id="camera-icon" viewBox="0 0 24 24">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2v11z"/>
            <circle cx="12" cy="13" r="4"/>
        </symbol>
        <!-- Light -->
        <symbol id="bulb-icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
            <path d="M9 21h6" stroke-linecap="round"/>
            <path d="M10 17h4" stroke-linecap="round"/>
            <path d="M12 3a7 7 0 0 1 7 7c0 2.2-1.1 4.2-2.8 5.4-.8.6-1.2 1.6-1.2 2.6v1H9v-1c0-1-.4-2-1.2-2.6A7.2 7.2 0 0 1 5 10a7 7 0 0 1 7-7z"/>
        </symbol>
        <!-- Obj -->
        <symbol id="obj-icon" viewBox="0 0 24 24" fill="none" stroke-width="1">
            <polygon points="4,8 12,3 20,8 12,13" stroke-linejoin="round"/>
            <polygon points="4,8 4,16 12,21 12,13" stroke-linejoin="round"/>
            <polygon points="20,8 20,16 12,21 12,13" stroke-linejoin="round"/>
        </symbol>
        <!-- Texture -->
        <symbol id="image-icon" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="3" width="20" height="18" rx="2" ry="2" fill="none"/>
            <circle cx="8" cy="8" r="2"/>
            <path d="M21 15l-5-5-4 4-3-3-5 5" stroke-width="1" fill="none"/>
        </symbol>
    </svg>
</head>
<body>
    <!-- Sidebar/menu -->
    <nav class="sidebar red collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
    <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close Menu</a>
    <div class="w3-container">
        <img src="res/img/FatalEngineLogo.png" alt="Fatal Engine Logo" class="sidebar-logo">
        <h3 class="w3-padding-64"><b>Fatal Engine</b></h3>
    </div>
    <div class="w3-bar-block">
        <a href="#" onclick="close()" class="w3-bar-item w3-button w3-hover-white">Home</a> 
        <a href="#Dependencies" onclick="close()" class="w3-bar-item w3-button w3-hover-white">Dependencies</a> 
        <a href="#SetUp" onclick="close()" class="w3-bar-item w3-button w3-hover-white">Set up</a> 
        <a href="#Examples" onclick="close()" class="w3-bar-item w3-button w3-hover-white">Examples</a>
        <a href="#Documentation" onclick="close()" class="w3-bar-item w3-button w3-hover-white">Documentation</a>
    </div>
    </nav>

    <!-- Top menu on small screens -->
    <header class="w3-container w3-top w3-hide-large w3-red w3-xlarge w3-padding">
        <a href="javascript:void(0)" class="w3-button w3-red w3-margin-right" onclick="open()">☰</a>
        <span>Fatal Engine</span>
    </header>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large" onclick="close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:340px;margin-right:40px">

    <!-- Version Header -->
    <div class="w3-container" style="margin-top:5px;" align="end">
        <h2><b>v0.01</b></h1>
    </div>
    
    <!-- Header -->
    <div class="w3-container" style="margin-top:30px" id="showcase">
        <h1 class="w3-jumbo"><b>Fatal Engine</b></h1>
    </div>
        
    <!-- Dependencies -->
    <div class="w3-container" id="Dependencies" style="margin-top:25px">
        <h1 class="w3-xxxlarge w3-text-red"><b>Dependencies</b></h1>
        <hr style="width:50px;border:5px solid red" class="w3-round">
        <p>For the correct use of the Fatal Engine you will need to install the following dependencies and tools:</p>
        <ul>
            <li><a href="https://www.python.org/downloads/" title="Python 3.11">Python</a></li>
            <li><a href="https://conan.io/downloads" title="Conan C/C++ Package Manager">Conan</a></li>
            <li><a href="https://cmake.org/" title="CMake">CMake</a></li>
            <li><a href="https://visualstudio.microsoft.com/es/vs/" title="Visual Studio 2022 Community Version">Visual Studio 2022</a></li>
            <li><a href="https://premake.github.io/download" title="Premake 5">Premake</a></li>
        </ul>
    </div>
    
    <!-- Set Up -->
    <div class="w3-container" id="SetUp" style="margin-top:25px">
        <h1 class="w3-xxxlarge w3-text-red"><b>Set Up</b></h1>
        <hr style="width:50px;border:5px solid red" class="w3-round">
        <p>For a correct installation, you need to follow this instructions:</p>
        <code style="font-size: 15px;">
            <ol>
                <li>Download the last version of the engine from the official <a href="" target="_blank" title="Fatal Engine">Fatal Engine Github repository</a>.</li>
                <li>Unzip the package.</li>
                <li>Open the <b><i>CMD</i></b> or the <b><i>Developer Command Prompt for VS</i></b> and go to the following route: "<code style="background-color: rgb(56, 56, 56); border-radius: 3px; color: white;">tools\</code>".</li>
                <li>Execute the file called "<code style="background-color: rgb(56, 56, 56); border-radius: 3px; color: white;">gendeps.bat</code>", once the proccess finishes you will see "<code style="background-color: rgb(56, 56, 56); border-radius: 3px; color: white;">build\</code>" on the main folder of the project.</li>
                <li>Enter the "<code style="background-color: rgb(56, 56, 56); border-radius: 3px; color: white;">build\</code>" directory and open "<code style="background-color: rgb(56, 56, 56); border-radius: 3px; color: white;">FatalEngine.sln</code>" to use the engine.</li>
            </ol>
        </code>
    </div>
    
    <!-- Example -->
    <div class="w3-container" id="Examples" style="margin-top:25px">
        <h1 class="w3-xxxlarge w3-text-red"><b>Examples</b></h1>
        <hr style="width:50px;border:5px solid red" class="w3-round">
        
        <!-- Camera -->
        <div class="w3-card w3-margin-bottom">
            <button onclick="toggleRow('Camera')" class="w3-light-grey collapsible">
                <svg class="architecture-icon">
                    <use href="#camera-icon"></use>
                </svg>
                <b class="icon-title">Camera</b> <span class="toggle-icon" id="icon-example1">+</span>
            </button>
            <div id="Camera" class="w3-container w3-hide">
                <pre><code class="language-cpp" style="border-radius: 10px;">
#include &lt;glad/glad.h&gt;
#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtc/matrix_transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;
#include &lt;iostream&gt;
                    
#include "Camera.hpp" 
#include "Input.hpp" 
#include "window.hpp" 
#include "esc.hpp" 
#include "Components.hpp"
#include "Sistems.hpp"
#include "tools.hpp"
                    
const int kWidthWindow = 800;
const int kHeightWindow = 800;
                    
float kLastX = kWidthWindow / 2.0f;
float kLastY = kHeightWindow / 2.0f;
bool kFirstMouse = true;
                    
int WinMain() {
    float deltaTime = 0.0f;
    float lastFrame = 0.0f;
                    
    bool* changeIntervalue = (bool*)malloc(sizeof(bool) * 4);
                    
    RMPH::WindowSystem PD; // sistema para crear ventana
    RMPH::Window screen{ kWidthWindow,kHeightWindow,"ShadowMap",&PD }; // crear ventana
                    
    RMPH::Input inputManager{ &screen,&PD }; //gestionador de inputs
                    
    RMPH::ECSManager Manager; // gestionador de entidades
                    
    size_t cam = Manager.create_entity(); // crear entidad de camara
                    
    Manager.add_component_type<RMPH::TranformComponent>(); // indicar los componentes que vas a usar 
    Manager.add_component_type<RMPH::CameraComponent>(); // indicar los componentes que vas a usar 
                    
    RMPH::TranformComponent  avgCam;
                    
    //CAMERA
                    
    avgCam.transform3D = RMPH::Transform3D(glm::vec3(0, 10, -5), glm::vec3(1, 1, 1), glm::vec3(45, 0, 0));
    Manager.get_component<RMPH::TranformComponent>(cam) = avgCam; // añadir un Component Transform a la camara
                    
    RMPH::CameraComponent avgC;
                    
    avgC.cam_ = std::make_shared<RMPH::Camera>(0.001f, 45.0f, 10.0f, 1, RMPH::Camera::View::Perspectiva); 
                    
    Manager.get_component<RMPH::CameraComponent>(cam) = avgC; // añadir un Component Camera a la camara
                    
    while (screen.IsOpen()) {
                    
        float currentFrame = static_cast<float>(glfwGetTime());
        deltaTime = currentFrame - lastFrame;
        lastFrame = currentFrame;
                    
        //ejemplo de como mover la camara
                    
    /*  if (inputManager.IsKeyPressed(RMPH::Input::MOUSE_LEFT)) {
                    
            float xoffset = inputManager.MouseX() - kLastX;
            float yoffset = kLastY - inputManager.MouseY();
                    
            kLastX = inputManager.MouseX();
            kLastY = inputManager.MouseY();
                    
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Rotate(glm::vec3(yoffset * Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MouseSensitivity, xoffset * Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MouseSensitivity, 0));
        } else {
            kLastX = inputManager.MouseX();
            kLastY = inputManager.MouseY();
        }
                    
        if (inputManager.IsKeyPressed(RMPH::Input::UP)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetFront() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
                    
        if (inputManager.IsKeyPressed(RMPH::Input::DOWN)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(-Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetFront() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::LEFT)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetRight() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::RIGHT)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(-Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetRight() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::Q)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(-Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetUp() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::E)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Translate(Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.GetUp() * (Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->MovementSpeed * deltaTime));
        }
                    
        if (inputManager.IsKeyPressed(RMPH::Input::D)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Rotate(glm::vec3(0, -Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->ViewSensitivity, 0));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::A)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Rotate(glm::vec3(0, Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->ViewSensitivity, 0));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::W)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Rotate(glm::vec3(-Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->ViewSensitivity, 0, 0));
        }
        if (inputManager.IsKeyPressed(RMPH::Input::S)) {
            Manager.get_component<RMPH::TranformComponent>(cam).value().transform3D.Rotate(glm::vec3(Manager.get_component<RMPH::CameraComponent>(cam).value().cam_->ViewSensitivity, 0, 0));
        }*/
                    
        screen.SwapBuffer();
        glfwPollEvents();
    }
                    
    screen.~Window();
    PD.~WindowSystem();
    inputManager.~Input();
                    
    return 0;
}
                </code></pre>
            </div>
        </div>

        <!-- Light -->
        <div class="w3-card w3-margin-bottom">
            <button onclick="toggleRow('Light')" class="w3-light-grey collapsible">
                <svg class="architecture-icon">
                    <use href="#bulb-icon"></use>
                </svg>
                <b class="icon-title">Light</b> <span class="toggle-icon" id="icon-example2">+</span>
            </button>
            <div id="Light" class="w3-container w3-hide">
                <p>Details for Example 2...</p>
            </div>
        </div>

        <!-- Obj -->
        <div class="w3-card w3-margin-bottom">
            <button onclick="toggleRow('Obj')" class="w3-light-grey collapsible">
                <svg class="architecture-icon">
                    <use href="#obj-icon"></use>
                </svg>
                <b class="icon-title">Obj</b> <span class="toggle-icon" id="icon-example2">+</span>
            </button>
            <div id="Obj" class="w3-container w3-hide">
                <p>Details for Example 2...</p>
            </div>
        </div>
        
        <!-- Texture -->
        <div class="w3-card w3-margin-bottom">
            <button onclick="toggleRow('Texture')" class="w3-light-grey collapsible">
                <svg class="architecture-icon">
                    <use href="#image-icon"></use>
                </svg>
                <b class="icon-title">Texture</b> <span class="toggle-icon" id="icon-example2">+</span>
            </button>
            <div id="Texture" class="w3-container w3-hide">
                <p>Details for Example 2...</p>
            </div>
        </div>
    </div>

    <!-- Documentation -->
    <div class="w3-container" id="Documentation" style="margin-top:25px">
        <h1 class="w3-xxxlarge w3-text-red"><b>Documentation</b></h1>
        <hr style="width:50px;border:5px solid red" class="w3-round">
        <p>If you have any doubt about the engine and the library you can consult the official documentation here.</p>
        <a href="https://goldsolacepvg.github.io/FatalEngineDocumentation/" target="_blank" title="Fatal Engine Documentation C++">
            <img src="/res/img/DocLogo.jpg" class="doc_logo">
        </a>
        <a href="" target="_blank" title="Fatal Engine Documentation Lua (Soon)">
            <img src="/res/img/DocLogo.jpg" class="doc_logo_lua">
        </a>
    </div>
    


    <!-- End page content -->
    </div>

    <div class="w3-light-grey w3-container w3-padding-32" style="margin-top:75px;padding-right:58px"><p class="w3-right">Made by <a title="Fatal Team" target="_blank" class="w3-hover-opacity">Fatal Team</a></p></div>

    <script src="./res/js/main.js"></script>

</body>
</html>
